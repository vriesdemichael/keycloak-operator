# Default values for keycloak-realm.
# This is a YAML-formatted file.

# Realm name (REQUIRED)
# This is the Keycloak realm identifier
realmName: ""

# Display name for the realm
displayName: ""

# Realm description (optional)
description: ""

# HTML title for login pages (optional)
loginPageTitle: ""

# Operator reference (REQUIRED)
# Reference to the Keycloak operator managing this realm
operatorRef:
  # Namespace where the operator is running
  namespace: keycloak-system

# Client Authorization Grants
# List of namespaces authorized to create clients in this realm
# Example: ["app-team", "another-team"]
clientAuthorizationGrants: []

# RBAC configuration
# Creates a RoleBinding to grant the operator access to this namespace
rbac:
  # Create RoleBinding (required for operator to read secrets in this namespace)
  create: true

  # Name of the operator's ClusterRole for namespace access
  operatorClusterRoleName: keycloak-operator-namespace-access

  # Name of the operator's ServiceAccount
  # Default format: keycloak-operator-<namespace>
  # Override if your operator uses a different service account name
  operatorServiceAccountName: ""

# Realm security settings
security:
  # Registration settings
  registrationAllowed: false
  registrationEmailAsUsername: false

  # Login settings
  editUsernameAllowed: false
  resetPasswordAllowed: true
  rememberMe: false
  verifyEmail: false
  loginWithEmailAllowed: true
  duplicateEmailsAllowed: false

  # Brute force protection
  bruteForceProtected: true
  permanentLockout: false
  maxFailureWait: 900
  minimumQuickLoginWait: 60
  waitIncrement: 60
  quickLoginCheckMillis: 1000
  maxDeltaTime: 43200
  failureFactor: 30

# Theme configuration
themes:
  login: ""
  admin: ""
  account: ""
  email: ""

# Localization settings
localization:
  defaultLocale: en
  supportedLocales:
    - en
  enabled: true

# Authentication Flows (optional)
# Define custom authentication flows with executions and configurations
authenticationFlows: []
  # Example: Custom browser flow
  # - alias: "custom-browser"
  #   description: "Custom browser flow with OTP"
  #   providerId: "basic-flow"
  #   topLevel: true
  #   builtIn: false
  #   authenticationExecutions:
  #     - authenticator: "auth-cookie"
  #       requirement: "ALTERNATIVE"
  #       priority: 10
  #     - authenticator: "auth-otp-form"
  #       requirement: "REQUIRED"
  #       priority: 20

# Authentication Flow Bindings (optional)
# Assign flows to realm authentication types by alias
browserFlow: ""
registrationFlow: ""
directGrantFlow: ""
resetCredentialsFlow: ""
clientAuthenticationFlow: ""
dockerAuthenticationFlow: ""
firstBrokerLoginFlow: ""

# Required Actions (optional)
# Configure required actions like email verification or password update
requiredActions: []
  # Example:
  # - alias: "VERIFY_EMAIL"
  #   name: "Verify Email"
  #   enabled: true
  #   defaultAction: true
  #   priority: 50

# Token settings
tokenSettings:
  # Access token lifespan in seconds
  accessTokenLifespan: 300
  accessTokenLifespanForImplicitFlow: 900

  # SSO session settings
  ssoSessionIdleTimeout: 1800
  ssoSessionMaxLifespan: 36000

  # Offline session settings
  offlineSessionIdleTimeout: 2592000
  offlineSessionMaxLifespanEnabled: false
  offlineSessionMaxLifespan: 5184000

  # Client session settings (omit or set to positive values)
  # clientSessionIdleTimeout: 1800
  # clientSessionMaxLifespan: 3600

# SMTP configuration (optional)
smtpServer:
  enabled: false
  host: ""
  port: 587
  from: ""
  fromDisplayName: ""
  replyTo: ""
  envelopeFrom: ""
  ssl: false
  starttls: true
  auth: true
  user: ""
  # Secret containing SMTP password
  passwordSecret:
    name: ""
    key: password

# Additional attributes (optional)
# Free-form key-value pairs for custom realm attributes
attributes: {}

# Password policy configuration (optional)
# Enforces password requirements for users in this realm
# Uncomment fields to enable specific policies
passwordPolicy: {}
  # Minimum password length (recommended: 12+)
  # length: 12

  # Character requirements
  # upperCase: 1
  # lowerCase: 1
  # digits: 1
  # specialChars: 1

  # Content restrictions
  # notUsername: true
  # notEmail: true

  # Hash iterations (OWASP recommends 210000 for PBKDF2-SHA256)
  # hashIterations: 210000

  # Password history (prevent reuse of N previous passwords)
  # passwordHistory: 5

  # Password expiration in days
  # forceExpiredPasswordChange: 90

  # Maximum password length
  # maxLength: 128

  # Custom regex pattern
  # regexPattern: ""

# OTP Policy (optional)
# Configure OTP (One-Time Password) settings for the realm
otpPolicy: {}
  # type: "totp"
  # algorithm: "HmacSHA256"
  # initialCounter: 1
  # digits: 6
  # lookAheadWindow: 1
  # period: 30
  # codeReusable: false
  #   # Use Keycloak internal application IDs, not human-readable names.
  #   # Examples:
  #   # - totpAppFreeOTPName
  #   # - totpAppGoogleName
  #   - totpAppFreeOTPName
  #   - totpAppGoogleName

# Identity Providers (optional)
# Configure external identity providers (OIDC, SAML, social logins)
# See CRD documentation for full schema
identityProviders: []
  # Example OIDC provider:
  # - alias: azure-ad
  #   providerId: oidc
  #   displayName: "Azure AD"
  #   enabled: true
  #   trustEmail: true
  #   config:
  #     clientId: "my-client-id"
  #     authorizationUrl: "https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize"
  #     tokenUrl: "https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token"
  #     userInfoUrl: "https://graph.microsoft.com/oidc/userinfo"
  #     defaultScope: "openid profile email"
  #   configSecrets:
  #     clientSecret:
  #       name: azure-ad-credentials
  #       key: client-secret
  #
  # Example GitHub provider:
  # - alias: github
  #   providerId: github
  #   displayName: "GitHub"
  #   enabled: true
  #   config:
  #     clientId: "my-github-client-id"
  #   configSecrets:
  #     clientSecret:
  #       name: github-credentials
  #       key: client-secret

# Client Scopes (optional)
# Define reusable client scopes with protocol mappers
clientScopes: []
  # Example client scopes:
  # - name: api.read
  #   description: "Read access to API"
  #   protocol: openid-connect
  #   attributes:
  #     display.on.consent.screen: "true"
  #     consent.screen.text: "Read access to API"
  #   protocolMappers:
  #     - name: audience-mapper
  #       protocol: openid-connect
  #       protocolMapper: oidc-audience-mapper
  #       config:
  #         included.custom.audience: api
  #         access.token.claim: "true"
  #
  # - name: api.write
  #   description: "Write access to API"
  #   protocol: openid-connect
  #   protocolMappers:
  #     - name: write-scope-claim
  #       protocol: openid-connect
  #       protocolMapper: oidc-hardcoded-claim-mapper
  #       config:
  #         claim.name: scope
  #         claim.value: api:write

# Default client scopes (optional)
# Scope names that are automatically assigned as default to new clients
defaultClientScopes: []
  # Example:
  # - profile
  # - email
  # - api.read

# Optional client scopes (optional)
# Scope names available as optional for clients
optionalClientScopes: []
  # Example:
  # - api.write
  # - offline_access

# Realm roles (optional)
# Define realm-level roles
roles:
  realmRoles: []
    # Example roles:
    # - name: admin
    #   description: "Administrator role"
    #   attributes:
    #     department: ["IT"]
    #     level: ["senior"]
    # - name: user
    #   description: "Regular user role"
    # - name: manager
    #   description: "Manager role with composite roles"
    #   composite: true
    #   compositeRoles:
    #     - user  # This role includes the 'user' role

# Groups (optional)
# Define user groups with role mappings
groups: []
  # Example groups:
  # - name: engineering
  #   attributes:
  #     department: ["Engineering"]
  #   realmRoles:
  #     - user
  #   subGroups:
  #     - name: backend
  #       realmRoles:
  #         - developer
  #     - name: frontend
  #       realmRoles:
  #         - developer
  # - name: admins
  #   realmRoles:
  #     - admin
  #   clientRoles:
  #     my-client:
  #       - manage-users

# Default groups (optional)
# Groups that are automatically assigned to new users
defaultGroups: []
  # Example:
  # - /engineering  # Group path
  # - users         # Group name (will be converted to /users)

# User Federation (optional)
# Configure LDAP, Active Directory, or Kerberos user federation
# For enterprise integration with existing user directories
userFederation: []
  # Example: Standard LDAP configuration
  # - name: corporate-ldap
  #   providerId: ldap
  #   connectionUrl: "ldap://ldap.example.com:389"
  #   bindDn: "cn=admin,dc=example,dc=com"
  #   bindCredentialSecret:
  #     name: ldap-credentials
  #     key: password
  #   usersDn: "ou=People,dc=example,dc=com"
  #   vendor: other  # other, ad, rhds, tivoli, edirectory
  #   usernameLdapAttribute: uid
  #   uuidLdapAttribute: entryUUID
  #   userObjectClasses:
  #     - inetOrgPerson
  #     - organizationalPerson
  #   editMode: READ_ONLY  # READ_ONLY, WRITABLE, UNSYNCED
  #   syncSettings:
  #     importEnabled: true
  #     fullSyncPeriod: -1  # -1 to disable, or seconds
  #     changedUsersSyncPeriod: -1
  #
  # Example: Active Directory configuration
  # - name: corporate-ad
  #   providerId: ldap
  #   connectionUrl: "ldaps://dc.corp.example.com:636"
  #   bindDn: "CN=Service Account,OU=Service,DC=corp,DC=example,DC=com"
  #   bindCredentialSecret:
  #     name: ad-credentials
  #     key: password
  #   usersDn: "OU=Users,DC=corp,DC=example,DC=com"
  #   vendor: ad
  #   usernameLdapAttribute: sAMAccountName
  #   uuidLdapAttribute: objectGUID
  #   rdnLdapAttribute: cn
  #   userObjectClasses:
  #     - user
  #     - organizationalPerson
  #   startTls: false
  #   trustEmail: true
  #   mappers:
  #     - name: email
  #       mapperType: user-attribute-ldap-mapper
  #       config:
  #         ldap.attribute: mail
  #         user.model.attribute: email
  #         read.only: "true"
  #
  # Example: LDAP with Kerberos/SPNEGO
  # - name: kerberos-ldap
  #   providerId: ldap
  #   connectionUrl: "ldap://ldap.example.com:389"
  #   bindDn: "cn=admin,dc=example,dc=com"
  #   bindCredentialSecret:
  #     name: ldap-credentials
  #     key: password
  #   usersDn: "ou=People,dc=example,dc=com"
  #   vendor: other
  #   allowKerberosAuthentication: true
  #   kerberosRealm: EXAMPLE.ORG
  #   serverPrincipal: HTTP/keycloak.example.com@EXAMPLE.ORG
  #   keytabSecret:
  #     name: kerberos-keytab
  #     key: keytab
  #   useKerberosForPasswordAuthentication: true

# Event logging configuration (optional)
# Note: Admin events are enabled by default because they are required for
# drift detection to work properly. See docs/guides/drift-detection.md for details.
eventsConfig:
  eventsEnabled: false
  eventsListeners: []
  enabledEventTypes: []
  # eventsExpiration: 86400  # seconds
  adminEventsEnabled: true  # Required for drift detection
  adminEventsDetailsEnabled: true  # Recommended for drift detection

# Client Profiles (optional)
# Define client profiles that group executors for enforcing security policies
# Profiles apply validation and restrictions to clients based on their configuration
clientProfiles: []
  # Example: Enforce PKCE for public clients
  # - name: pkce-enforced
  #   description: "Requires PKCE for OAuth2 authorization code flow"
  #   executors:
  #     - executor: pkce-enforcer
  #       configuration:
  #         auto-configure: "true"
  #
  # Example: Enforce secure client authentication
  # - name: secure-authenticator
  #   description: "Requires secure client authentication methods"
  #   executors:
  #     - executor: secure-client-authenticator
  #       configuration:
  #         allowed-client-authenticators:
  #           - client-jwt
  #           - client-x509
  #
  # Example: Enforce confidential client settings
  # - name: confidential-client-profile
  #   description: "Security profile for confidential clients"
  #   executors:
  #     - executor: confidential-client-accept-implicit-grant-disabled
  #     - executor: secure-signature-algorithm
  #       configuration:
  #         default-algorithm: "PS256"

# Client Policies (optional)
# Define policies that apply client profiles based on conditions
# Policies determine when and to which clients the profiles are applied
clientPolicies: []
  # Example: Apply PKCE to all public clients
  # - name: pkce-for-public-clients
  #   description: "Enforces PKCE for all public clients"
  #   enabled: true
  #   conditions:
  #     - condition: client-access-type
  #       configuration:
  #         is-confidential-client: "false"
  #   profiles:
  #     - pkce-enforced
  #
  # Example: Apply secure authentication to confidential clients
  # - name: secure-auth-for-confidential
  #   description: "Requires secure authentication for confidential clients"
  #   enabled: true
  #   conditions:
  #     - condition: client-access-type
  #       configuration:
  #         is-confidential-client: "true"
  #   profiles:
  #     - secure-authenticator
  #     - confidential-client-profile
  #
  # Example: Apply profile based on client roles
  # - name: api-client-policy
  #   description: "Policy for clients with api-access role"
  #   enabled: true
  #   conditions:
  #     - condition: client-roles
  #       configuration:
  #         roles:
  #           - api-access
  #   profiles:
    #     - secure-authenticator

# Organizations (optional, Keycloak 26+ only)
# Organizations provide multi-tenancy support, allowing users to be grouped
# by organization with their own domains and identity providers.
# NOTE: Requires Keycloak version 26.0.0 or higher.
organizationsEnabled: false
organizations: []
  # Example: Basic organization
  # - name: acme-corp
  #   alias: acme
  #   description: "ACME Corporation"
  #   enabled: true
  #   domains:
  #     - name: acme.com
  #       verified: true
  #     - name: acme-corp.org
  #       verified: false
  #   attributes:
  #     industry:
  #       - technology
  #     tier:
  #       - enterprise
  #
  # Example: Organization with identity provider linking
  # - name: partner-org
  #   alias: partner
  #   description: "Partner Organization with SSO"
  #   enabled: true
  #   domains:
  #     - name: partner.example.com
  #       verified: true
  #   identityProviders:
  #     - alias: partner-saml-idp  # Must exist in the realm's identity providers
  #   attributes:
  #     partnership_level:
  #       - gold

# Extra Kubernetes manifests to deploy
# Useful for deploying ExternalSecrets, SealedSecrets, ConfigMaps, etc.
extraManifests: []
  # - apiVersion: v1
  #   kind: Secret
  #   metadata:
  #     name: smtp-password
  #   stringData:
  #     password: my-smtp-password
  # - apiVersion: external-secrets.io/v1beta1
  #   kind: ExternalSecret
  #   metadata:
  #     name: smtp-password
  #   spec:
  #     secretStoreRef:
  #       name: vault-backend
  #       kind: SecretStore
  #     target:
  #       name: smtp-password
  #     data:
  #       - secretKey: password
  #         remoteRef:
  #           key: /keycloak/smtp
  #           property: password

# Common labels applied to all resources
commonLabels: {}

# Common annotations applied to all resources
commonAnnotations: {}
