# Default values for keycloak-client.
# This is a YAML-formatted file.

# Client ID (REQUIRED)
# This is the unique identifier for the client in Keycloak
clientId: ""

# Client description
description: ""

# Realm reference (REQUIRED)
# Reference to the parent KeycloakRealm
realmRef:
  # Name of the KeycloakRealm CR
  name: ""
  
  # Namespace of the KeycloakRealm CR
  namespace: ""
  
  # Authorization secret containing the realm token (REQUIRED)
  # This secret must contain the token generated by the realm reconciler
  # Usually named: {realm-name}-realm-auth
  authorizationSecretRef:
    # Name of the realm's authorization secret
    name: ""
    # Key within the secret (default: token)
    key: token

# RBAC configuration
# Creates a RoleBinding to grant the operator access to this namespace
rbac:
  # Create RoleBinding (required for operator to read secrets in this namespace)
  create: true
  
  # Namespace where the operator is running
  operatorNamespace: keycloak-system
  
  # Name of the operator's ClusterRole for namespace access
  operatorClusterRoleName: keycloak-operator-namespace-access
  
  # Name of the operator's ServiceAccount
  # Default format: keycloak-operator-<namespace>
  # Override if your operator uses a different service account name
  operatorServiceAccountName: ""

# Client type configuration
publicClient: false
bearerOnly: false
protocol: openid-connect

# OAuth2/OIDC configuration
redirectUris: []
  # - "https://example.com/callback"
  # - "http://localhost:3000/callback"

webOrigins: []
  # - "https://example.com"
  # - "http://localhost:3000"

postLogoutRedirectUris: []
  # - "https://example.com/logout"

# Base URL for the client
baseUrl: ""
rootUrl: ""
adminUrl: ""

# Client authentication settings
clientAuthenticatorType: client-secret

# Access type settings
standardFlowEnabled: true
implicitFlowEnabled: false
directAccessGrantsEnabled: true
serviceAccountsEnabled: false

# Consent settings
consentRequired: false
displayOnConsentScreen: true

# Front-channel logout
frontchannelLogout: true

# Authorization settings
authorizationServicesEnabled: false

# Advanced settings
alwaysDisplayInConsole: false
fullScopeAllowed: true

# Client settings
settings:
  enabled: true
  
  # PKCE settings
  pkceCodeChallengeMethod: ""  # S256, plain, or empty for none
  
  # Token settings
  accessTokenLifespan: 0  # 0 = use realm default
  
  # Session settings
  clientSessionIdleTimeout: 0
  clientSessionMaxLifespan: 0

# Default client scopes
defaultClientScopes: []
  # - profile
  # - email

# Optional client scopes
optionalClientScopes: []
  # - address
  # - phone

# Service account roles (if serviceAccountsEnabled: true)
serviceAccountRoles:
  # Realm roles
  realmRoles: []
    # - view-users
    # - manage-users
  
  # Client roles (map of client ID to roles)
  clientRoles: {}
    # account:
    #   - view-profile
    #   - manage-account

# Protocol mappers
protocolMappers: []
  # - name: audience-mapper
  #   protocol: openid-connect
  #   protocolMapper: oidc-audience-mapper
  #   config:
  #     included.client.audience: "my-api"
  #     id.token.claim: "false"
  #     access.token.claim: "true"

# Authentication flow overrides
authenticationFlow:
  browserFlow: ""
  directGrantFlow: ""
  clientAuthenticationFlow: ""

# Secret management (for confidential clients)
# When manageSecret=true, operator creates/manages a Kubernetes secret
manageSecret: true

# Name of the Kubernetes secret to store client credentials
# If not specified, defaults to: <client-name>-credentials
secretName: ""

# Regenerate the client secret on update
regenerateSecret: false

# Extra Kubernetes manifests to deploy
# Useful for deploying ExternalSecrets, SealedSecrets, ConfigMaps, etc.
extraManifests: []
  # - apiVersion: v1
  #   kind: Secret
  #   metadata:
  #     name: client-credentials
  #   stringData:
  #     client-id: my-client
  #     client-secret: my-secret
  # - apiVersion: external-secrets.io/v1beta1
  #   kind: ExternalSecret
  #   metadata:
  #     name: client-credentials
  #   spec:
  #     secretStoreRef:
  #       name: vault-backend
  #       kind: SecretStore
  #     target:
  #       name: client-credentials
  #     data:
  #       - secretKey: client-secret
  #         remoteRef:
  #           key: /keycloak/clients/{{ .Values.clientId }}
  #           property: secret

# Common labels applied to all resources
commonLabels: {}

# Common annotations applied to all resources
commonAnnotations: {}
