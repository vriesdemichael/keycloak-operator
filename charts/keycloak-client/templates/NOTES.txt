ğŸ‰ Keycloak Client has been created!

ğŸ“¦ Release Name: {{ .Release.Name }}
ğŸ”‘ Client ID: {{ include "keycloak-client.clientId" . }}
ğŸ”§ Namespace: {{ .Release.Namespace }}
ğŸ›ï¸  Realm: {{ .Values.realmRef.name }} ({{ .Values.realmRef.namespace }})

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{- if .Values.rbac.create }}
âœ… RBAC CONFIGURATION

A RoleBinding has been created to grant the Keycloak operator access to this namespace.

Operator Details:
â€¢ Namespace: {{ .Values.rbac.operatorNamespace }}
â€¢ ServiceAccount: {{ .Values.rbac.operatorServiceAccountName }}
â€¢ ClusterRole: {{ .Values.rbac.operatorClusterRoleName }}

The operator can now read secrets in this namespace that have the required label.

{{- else }}
âš ï¸  RBAC NOT CONFIGURED

You need to manually create a RoleBinding to grant operator access:

    kubectl create rolebinding keycloak-operator-access \
      --clusterrole={{ .Values.rbac.operatorClusterRoleName }} \
      --serviceaccount={{ .Values.rbac.operatorNamespace }}:{{ .Values.rbac.operatorServiceAccountName }} \
      -n {{ .Release.Namespace }}

{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” IMPORTANT: SECRET LABEL REQUIREMENT

All secrets used by this client MUST have the following label:

    vriesdemichael.github.io/keycloak-allow-operator-read=true

Without this label, the operator will refuse to read the secret.

Example - label an existing secret:

    kubectl label secret my-client-secret \
      vriesdemichael.github.io/keycloak-allow-operator-read=true \
      -n {{ .Release.Namespace }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” MONITORING YOUR CLIENT

Check the client status:

    kubectl get keycloakclient {{ include "keycloak-client.fullname" . }} -n {{ .Release.Namespace }}

Watch the client reconciliation:

    kubectl get keycloakclient {{ include "keycloak-client.fullname" . }} -n {{ .Release.Namespace }} -w

View client details:

    kubectl describe keycloakclient {{ include "keycloak-client.fullname" . }} -n {{ .Release.Namespace }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{- if and (not .Values.publicClient) .Values.manageSecret }}

ğŸ” CLIENT SECRET

Your client secret will be stored in a Kubernetes secret.

1ï¸âƒ£  Wait for the client to be ready:

    kubectl wait --for=jsonpath='{.status.phase}'=Ready \
      keycloakclient/{{ include "keycloak-client.fullname" . }} \
      -n {{ .Release.Namespace }} --timeout=300s

2ï¸âƒ£  Retrieve the client secret:

    {{- if .Values.secretName }}
    SECRET_NAME="{{ .Values.secretName }}"
    {{- else }}
    SECRET_NAME="{{ include "keycloak-client.fullname" . }}-credentials"
    {{- end }}

    kubectl get secret $SECRET_NAME \
      -n {{ .Release.Namespace }} \
      -o jsonpath='{.data.client-secret}' | base64 -d

    âš ï¸  Keep this secret safe! It's used to authenticate your application.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{- else if .Values.publicClient }}

â„¹ï¸  PUBLIC CLIENT

This is a public client (e.g., for SPAs or mobile apps).
No client secret is required for authentication.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{{- end }}

ğŸ“š CLIENT CONFIGURATION

{{- if .Values.redirectUris }}
Redirect URIs:
{{- range .Values.redirectUris }}
  â€¢ {{ . }}
{{- end }}
{{- else }}
âš ï¸  No redirect URIs configured. Add them with --set redirectUris={url1,url2}
{{- end }}

{{- if .Values.webOrigins }}

Web Origins:
{{- range .Values.webOrigins }}
  â€¢ {{ . }}
{{- end }}
{{- end }}

Client Type:
  â€¢ Public: {{ .Values.publicClient }}
  â€¢ Bearer Only: {{ .Values.bearerOnly }}
  â€¢ Service Account: {{ .Values.serviceAccountsEnabled }}

For more information:
â€¢ Documentation: https://github.com/vriesdemichael/keycloak-operator
â€¢ Issues: https://github.com/vriesdemichael/keycloak-operator/issues

Happy authenticating! ğŸ”
