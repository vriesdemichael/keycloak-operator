apiVersion: keycloak.mdvr.nl/v1
kind: Keycloak
metadata:
  name: test-keycloak-ha
  namespace: test-namespace
spec:
  image: "quay.io/keycloak/keycloak:23.0.0"
  replicas: 2
  database:
    type: "postgresql"
    host: "postgres.postgres.svc.cluster.local"
    name: "keycloak"
    username: "keycloak"
    password_secret:
      name: "test-db-secret"
      key: "password"
  admin_access:
    username: "admin"
    password_secret:
      name: "test-admin-secret"
      key: "password"
  service:
    type: "ClusterIP"
    port: 8080
  ingress:
    enabled: true
    host: "keycloak-test.local"
    tls:
      enabled: false
  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  persistence:
    enabled: true
    size: "1Gi"
    storage_class: "standard"