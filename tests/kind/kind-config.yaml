# Kind cluster configuration for Keycloak operator integration testing
# Simplified configuration for reliable cluster creation and testing

kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: keycloak-operator-test

# Single-node configuration to minimize resource usage on CI runners.
# Multi-replica Keycloak tests work fine on a single node (no hard anti-affinity).
# Kind automatically allows scheduling on control-plane for single-node clusters.
nodes:
- role: control-plane
  extraPortMappings:
  # Operator metrics and health endpoints
  - containerPort: 8080
    hostPort: 8080
    protocol: TCP
  # Keycloak service port for testing
  - containerPort: 30080
    hostPort: 30080
    protocol: TCP
