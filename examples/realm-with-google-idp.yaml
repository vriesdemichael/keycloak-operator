# yaml-language-server: $schema=https://vriesdemichael.github.io/keycloak-operator/schemas/v1/KeycloakRealm.json
---
apiVersion: vriesdemichael.github.io/v1
kind: KeycloakRealm
metadata:
  name: realm-with-google-idp
  namespace: my-app
spec:
  realmName: my-realm
  operatorRef:
    namespace: keycloak-operator
    authorizationSecretRef:
      name: my-realm-token

  # Google OAuth Identity Provider
  identityProviders:
    - alias: google
      providerId: google
      enabled: true
      trustEmail: true
      firstBrokerLoginFlowAlias: first broker login
      config:
        clientId: your-google-oauth-client-id.apps.googleusercontent.com
        clientSecret: your-google-oauth-client-secret
        hostedDomain: ""  # Leave empty for all Google accounts, or set to your domain (e.g., "example.com")
        defaultScope: "openid profile email"
        syncMode: IMPORT
