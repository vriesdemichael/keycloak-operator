number: 49
title: No HA or leader election
category: architecture
decision: No high availability or leader election. Single operator replica only. Operator
  downtime acceptable during upgrades or failures. Reconciliation resumes when operator
  restarts.
agent_instructions: Do not implement leader election (Kopf supports it but we don't
  use it). Configure deployment with single replica. Accept that operator downtime
  means reconciliation pauses. Document that resource state is preserved and reconciliation
  resumes on restart. For critical environments, minimize downtime with fast restarts,
  not HA.
rationale: Operator is not on critical path for running applications. Applications
  use existing Keycloak state; operator only needed for configuration changes. Reconciliation
  pausing during operator downtime is acceptable. HA adds complexity (leader election,
  coordination) for minimal benefit. Kubernetes restarts failed operators quickly
  (seconds). Most outages are planned (upgrades) and brief. Better to focus on fast
  recovery than preventing all downtime. Stateless operator means no data loss on
  restart.
provenance: human
rejected_alternatives:
- alternative: Active-passive HA with leader election
  reason: Complexity not justified. Passive replica wastes resources. Operator downtime
    impact minimal.
- alternative: Active-active multi-leader
  reason: Extremely complex. Risk of split-brain and resource conflicts. Not needed
    for operator workload.
